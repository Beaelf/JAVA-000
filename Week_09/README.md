# RPC

**RPC 的全称是 Remote Procedure Call，即远程过程调用。**

## What's RPC

RPC 是帮助我们屏蔽网络编程细节，实现调用远程方法就跟调用本地（同一个项目中的方法）一样的体验，我们不需要因为这个方法是远程调用就需要编写很多与业务无关的代码。

1. 屏蔽远程调用跟本地调用的区别，让我们感觉就是调用项目内的方法；
2. 隐藏底层网络通信的复杂性，让我们更专注于业务逻辑。

## RPC 通信流程

 RPC 是一个远程调用，通过网络来传输数据，一般默认采用 TCP 来传输。

网络传输的数据必须是二进制数据，但调用方请求的出入参数都是对象。要在网络中传输，就要转成可传输的二进制，因此会有序列化的过程。

服务提供方，接收到TCP请求后，需要对二进制数据进行解析。因此这里需要约定数据格式内容，也就是协议。

大多数的协议会分成两部分，分别是数据头和消息体。数据头一般用于身份识别，包括协议标识、数据大小、请求类型、序列化类型等信息；消息体主要是请求的业务参数信息和扩展属性等。

上面的流程基本就包含了RPC的整个流程，但是还要有一步。就是屏蔽实现细节，对上面的流程进行封装。这种封装，通常是通过动态代理来实现。代理实现类会拦截所有的方法调用，在提供的方法处理逻辑里面完成一整套的远程调用，并把远程调用结果返回给调用方，这样调用方在调用远程方法的时候就获得了像调用本地接口一样的体验。

![image-20201214145741177](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20201214145741177.png)。
